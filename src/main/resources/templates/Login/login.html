<!DOCTYPE html>
<html>
  <head>
    <!-- Basic Page Info -->
    <meta charset="utf-8" />
    <title>DeskApp - Bootstrap Admin Dashboard HTML Template</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body
    style="
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background-image: url(/assets/User/images/image-top-1.jpg);
    "
  >
    <div
      class="box_login"
      style="
        background-color: wheat;
        width: 500px;
        border-radius: 10px;
        padding: 20px;
        height: 230px;
      "
    >
      <form action="" id="loginForm">
        <label for="" style="font-size: 20px; font-weight: 700"
          >UserName:</label
        >
        <input
          type="text"
          style="
            width: 100%;
            padding: 10px 5px;
            font-size: 20px;
            border: none;
            border-radius: 10px;
            margin-top: 10px;
          "
          id="username"
          placeholder="Vui lòng nhập thông tin tài khoản"
        />
        <label
          for=""
          style="
            display: block;
            font-size: 20px;
            font-weight: 700;
            margin-top: 5px;
          "
          >Password:</label
        >
        <input
          type="password"
          style="
            width: 100%;
            padding: 10px 5px;
            font-size: 20px;
            border: none;
            border-radius: 10px;
            margin-top: 10px;
          "
          id="password"
          placeholder="Vui lòng nhập thông tin password"
        />
        <button
          style="
            width: 100%;
            border: none;
            border-radius: 10px;
            padding: 10px;
            margin-top: 20px;
            font-size: 20px;
            background: darkkhaki;
          "
          type="submit"
        >
          Đăng Nhập
        </button>
        <a
          href="/register"
          style="
            display: block;
            width: 50;
            text-align: center;
            text-decoration: none;
            margin: 10px;
          "
          >Đăng ký</a
        >
      </form>
      <script>
        $("#loginForm").on("submit", function (event) {
          event.preventDefault(); // Prevent the default form submission

          const username = $("#username").val();
          const password = $("#password").val();

          $.ajax({
            url: `http://localhost:8080/api/v1/security/login/${username}&${password}`,
            type: "POST",
            dataType: "json",
            success: function (data) {
              if (data.success) {
                // Giả sử API trả về một đối tượng JSON với trường 'success'
                window.location.href = "/Destination";
              }
            },
            error: function (xhr, status, error) {
              console.log("Error:", error);
              // Handle error, e.g., show an error message
              alert("Có lỗi xảy ra. Vui lòng thử lại sau.");
            },
          });
        });
      </script>
    </div>
  </body>
</html>
